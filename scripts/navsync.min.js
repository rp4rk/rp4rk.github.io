!function(i,t){"use strict";function h(t,h){this.element=t,this.settings=i.extend({},s,h),this._defaults=s,this._name=n,this.init()}var n="navSync",s={highlightClass:"navsync-menu-highlight",ignoreNavHeightHighlight:!1,ignoreNavHeightScroll:!1,animationTime:500};i.extend(h.prototype,{init:function(){var h=i(this.element);this.highlightClass=this.settings.highlightClass?this.settings.highlightClass:this._defaults.highlightClass,this.watchedDivs=this.buildWatchedDivs(h),this.watchedDivs.forEach(function(h){h[3].click(function(n){i(t).unbind("scroll"),n.preventDefault(),this.scrollTo(h[1],500)}.bind(this))}.bind(this)),this.checkForHighlight(this.watchedDivs),i(t).bind("scroll",function(){this.scrollFunc()}.bind(this))},scrollFunc:function(){t.requestAnimationFrame(function(){this.checkForHighlight(this.watchedDivs)}.bind(this))},checkForHighlight:function(i){i.forEach(function(i){this.isInView(i[1],i[2])?i[3].addClass(this.highlightClass):i[3].removeClass(this.highlightClass)}.bind(this))},getAnchors:function(t){var h=[];return t.find("a").each(function(t,n){h.push(i(n))}),h},buildWatchedDivs:function(t){var h=this.getAnchors(t).filter(function(i){return this.isAnchor(i)}.bind(this)).map(function(t){var h=i(t.attr("href"));return[h,h.offset().top,h.offset().top+h.outerHeight(!0),t]}.bind(this));return h},isInView:function(h,n){var s=i(t).scrollTop()+i(t).height()/2;return s>=h&&n>=s},isAnchor:function(i){var t=i.attr("href").replace("/","");return"#"===t.charAt(0)},scrollTo:function(h,n){i("html, body").animate({scrollTop:h},n,function(){i(t).bind("scroll",function(){this.scrollFunc()}.bind(this)),this.checkForHighlight(this.watchedDivs)}.bind(this))}}),i.fn[n]=function(t){return this.each(function(){i.data(this,"plugin_"+n)||i.data(this,"plugin_"+n,new h(this,t))})}}(jQuery,window,document);